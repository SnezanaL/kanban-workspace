<!-- Sidebar panel -->
<aside
  class="hidden h-screen sticky top-0 shrink-0 md:flex flex-col justify-between border-r border-gray-200 bg-white dark:bg-dark-400 dark:border-dark-400 overflow-hidden transition-[width,min-width] duration-300 ease-in-out"
  [style.width]="sidebar.isHidden() ? '0px' : '256px'"
  [style.min-width]="sidebar.isHidden() ? '0px' : '256px'"
  [attr.aria-hidden]="sidebar.isHidden()"
>
  <div class="w-64 flex flex-col flex-1 justify-between overflow-y-auto">
    <div class="px-4 pt-6">
      <div class="flex flex-col items-start my-3">
        <lib-kanban-logo></lib-kanban-logo>
      </div>
      <p class="mb-4 text-xs font-semibold tracking-[0.2em] text-gray-500 dark:text-dark-200">
        ALL BOARDS ({{ boards().length }})
      </p>
      <nav class="space-y-1 text-sm">
        @for (board of boards(); track board.name) {
        <button
          type="button"
          (click)="boardSelected.emit(board.name)"
          [class]="
            selectedBoardName() === board.name
              ? 'flex w-full items-center gap-3 rounded-r-full bg-primary text-white px-4 py-2 text-left text-xs font-medium'
              : 'flex w-full items-center gap-3 rounded-r-full py-2 text-left text-xs px-4 font-medium text-gray-500 hover:text-primary hover:bg-gray-100 dark:text-dark-200 dark:hover:text-primary dark:hover:bg-dark-500'
          "
        >
          <svg
            width="16"
            height="16"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            class="h-4 w-4 shrink-0"
          >
            <path
              d="M0 2.889A2.889 2.889 0 0 1 2.889 0H13.11A2.889 2.889 0 0 1 16 2.889V13.11A2.888 2.888 0 0 1 13.111 16H2.89A2.889 2.889 0 0 1 0 13.111V2.89Zm1.333 5.555v4.667c0 .859.697 1.556 1.556 1.556h6.889V8.444H1.333Zm8.445-1.333V1.333h-6.89A1.556 1.556 0 0 0 1.334 2.89V7.11h8.445Zm4.889-1.333H11.11v4.444h3.556V5.778Zm0 5.778H11.11v3.11h2a1.556 1.556 0 0 0 1.556-1.555v-1.555Zm0-7.112V2.89a1.555 1.555 0 0 0-1.556-1.556h-2v3.111h3.556Z"
            />
          </svg>
          <span>{{ board.name }}</span>
        </button>
        }
        <button
          type="button"
          class="mt-2 flex w-full items-center gap-3 rounded-r-full py-2 text-left text-xs font-medium text-primary hover:bg-primary-light/40"
          (click)="createBoardClicked.emit()"
        >
          <span class="text-base">+</span>
          <span>Create New Board</span>
        </button>
      </nav>
    </div>

    <div class="px-4 pb-6">
      <!-- Dark mode toggle -->
      <div
        class="mb-3 flex items-center justify-center gap-3 rounded-lg bg-gray-100 px-3 py-2 text-xs text-gray-500 dark:bg-dark-500 dark:text-dark-200"
      >
        <img src="assets/images/icon-light-theme.svg" alt="Light theme" class="h-4 w-4" />
        <button
          type="button"
          class="relative h-5 w-10 rounded-full bg-primary"
          [attr.aria-pressed]="sidebar.isDarkMode()"
          (click)="sidebar.toggleDarkMode()"
        >
          <span
            class="absolute left-0.5 top-0.5 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200"
            [class.translate-x-5]="sidebar.isDarkMode()"
          ></span>
        </button>
        <img src="assets/images/icon-dark-theme.svg" alt="Dark theme" class="h-4 w-4" />
      </div>

      <!-- Hide Sidebar -->
      <button
        type="button"
        class="flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-xs font-medium text-gray-500 hover:bg-gray-100 dark:text-dark-200 dark:hover:bg-dark-500 transition-colors"
        (click)="sidebar.toggleSidebar()"
      >
        <svg
          width="18"
          height="16"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          class="shrink-0"
        >
          <path
            d="M8.522 11.223a4.252 4.252 0 0 1-3.654-5.22l3.654 5.22ZM9 12.25A8.685 8.685 0 0 1 1.5 8a8.612 8.612 0 0 1 2.76-2.864l-.86-1.23A10.112 10.112 0 0 0 .208 7.238a1.5 1.5 0 0 0 0 1.524A10.187 10.187 0 0 0 9 13.75c.414 0 .828-.025 1.239-.074l-1-1.43A8.88 8.88 0 0 1 9 12.25Zm8.792-3.488a10.14 10.14 0 0 1-4.486 4.046l1.504 2.148a.375.375 0 0 1-.092.523l-.648.453a.375.375 0 0 1-.523-.092L3.19 1.044A.375.375 0 0 1 3.282.52L3.93.068a.375.375 0 0 1 .523.092l1.735 2.479A10.308 10.308 0 0 1 9 2.25c3.746 0 7.031 2 8.792 4.988a1.5 1.5 0 0 1 0 1.524ZM16.5 8a8.674 8.674 0 0 0-6.755-4.219A1.75 1.75 0 1 0 12.75 5v-.001a4.25 4.25 0 0 1-1.154 5.366l.834 1.192A8.641 8.641 0 0 0 16.5 8Z"
          />
        </svg>
        Hide Sidebar
      </button>
    </div>
  </div>
</aside>

<!-- Show Sidebar pill (fixed, bottom-left) -->
@if (sidebar.isHidden()) {
<button
  type="button"
  aria-label="Show Sidebar"
  class="fixed bottom-8 left-0 z-50 hidden md:flex items-center gap-2 rounded-r-full bg-primary px-5 py-3.5 text-white shadow-lg hover:bg-primary-dark transition-colors"
  (click)="sidebar.toggleSidebar()"
>
  <svg width="16" height="11" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
    <path
      d="M15.815 4.434A9.055 9.055 0 0 0 8 0 9.055 9.055 0 0 0 .185 4.434a1.333 1.333 0 0 0 0 1.354A9.055 9.055 0 0 0 8 10.222c3.33 0 6.25-1.777 7.815-4.434a1.333 1.333 0 0 0 0-1.354ZM8 8.89A3.776 3.776 0 0 1 4.222 5.11 3.776 3.776 0 0 1 8 1.333a3.776 3.776 0 0 1 3.778 3.778A3.776 3.776 0 0 1 8 8.89Zm2.889-3.778a2.889 2.889 0 1 1-5.438-1.36 1.19 1.19 0 1 0 1.19-1.189H6.64a2.889 2.889 0 0 1 4.25 2.549Z"
    />
  </svg>
</button>
}
